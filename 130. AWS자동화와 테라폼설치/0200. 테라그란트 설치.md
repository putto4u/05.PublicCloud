

### Step 1: 파워셸 관리자 권한 실행

운영체제의 시스템 환경 변수(Environment Variables, 운영체제가 참조하는 시스템 설정 값이 담긴 변수)를 수정하고 보호된 경로에 파일을 써야 하므로 반드시 **관리자 권한(Administrator Privileges)**으로 실행해야 합니다.

1. 윈도우 시작 버튼을 누르고 `PowerShell`을 검색합니다.
2. 검색된 결과에서 마우스 오른쪽 버튼을 클릭하여 **[관리자 권한으로 실행]**을 선택합니다.

### Step 2: 실행 규칙(Execution Policy) 확인 및 허용 설정

파워셸은 기본적으로 보안을 위해 외부에서 다운로드한 스크립트의 실행을 차단하고 있습니다. 원격 서버에서 설치 스크립트를 가져와 실행해야 하므로 보안 정책을 일시적으로 우회해야 합니다.

명령어 프롬프트(Command Prompt, 텍스트 명령어를 입력하여 시스템을 제어하는 창)에 다음 명령어를 입력합니다.

```powershell
Get-ExecutionPolicy

```

결과값이 `Restricted`(제한됨) 등으로 출력되어 실행이 차단된 상태라면, 아래 명령어를 통해 현재 실행 중인 프로세스에 한정하여 스크립트 실행을 허용합니다.

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force

```

### Step 3: 원격 설치 스크립트 실행

공식 웹사이트에서 제공하는 설치 스크립트를 호출합니다. 아래 전체 코드를 복사하여 파워셸 창에 붙여넣기 한 후 `Enter` 키를 누릅니다.

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

```

> **주석(Note): 스크립트 내부 동작 원리 분석**
> * `Set-ExecutionPolicy Bypass`: 설치를 위해 스크립트 실행 권한을 우회합니다.
> * `[System.Net.ServicePointManager]::SecurityProtocol = ... -bor 3072`: 최신 웹 표준인 TLS 1.2(Transport Layer Security 1.2, 인터넷 통신을 보호하는 암호화 프로토콜)를 강제로 활성화하여 안전하고 암호화된 채널로 다운로드를 진행합니다.
> * `iex (...)`: 지정된 URL에서 텍스트 형태의 파워셸 설치 스크립트를 다운로드(`DownloadString`) 받아 메모리 상에서 즉시 실행(`Invoke-Expression`)합니다.
> 
> 

### Step 4: 설치 완료 검증

설치가 완료된 후, 초코레티 실행 명령어가 시스템 환경 변수에 정상적으로 등록되었는지 확인해야 합니다. 파워셸 창에 아래 명령어를 입력하여 버전 정보가 출력되는지 검증합니다.

```powershell
choco -v

```

정상적으로 설치되었다면 `2.x.x` 와 같이 현재 설치된 버전 번호가 출력됩니다.

---




**Windows(윈도우) 환경에서 Chocolatey(초콜레티)를 활용한 Terragrunt(테라그런트) 프로비저닝 환경 구축**

엔터프라이즈 인프라스트럭처를 코드로 관리하는 **IaC (Infrastructure as Code, 코드형 인프라)** 환경을 Windows(윈도우) 로컬 PC에 구축할 때, 패키지 관리자를 사용하는 것은 아키텍트의 기본 소양입니다. **Chocolatey(초콜레티)**<sup>1</sup>를 사용하면 복잡한 환경 변수 설정이나 실행 파일(Binary) 다운로드 과정 없이 명령어 한 줄로 **Terragrunt(테라그런트)**와 그 의존성 패키지를 빠르고 정확하게 설치할 수 있습니다.

### 1. 사전 준비 및 권한 설정

패키지 설치는 OS(Operating System, 운영 체제)의 시스템 폴더와 환경 변수를 수정하므로 반드시 관리자 권한이 필요합니다.

**1단계:** Windows 시작 메뉴에서 `PowerShell`을 검색한 후, **'관리자 권한으로 실행'**을 클릭하여 터미널을 엽니다.

**2단계:** 시스템에 Chocolatey가 정상적으로 설치되어 있는지 버전을 확인합니다.

```powershell
choco -v

```

*(만약 버전 정보가 출력되지 않고 오류가 발생한다면, 공식 웹사이트의 가이드에 따라 Chocolatey를 먼저 설치해야 합니다.)*

### 2. Terraform(테라폼) 및 Terragrunt(테라그런트) 설치

Terragrunt는 단독으로 동작하는 독립적인 도구가 아니라, Terraform의 기능을 확장하고 제어해 주는 래퍼(Wrapper, 기존 프로그램의 기능을 감싸서 확장하는 프로그램)입니다. 따라서 **Terraform(테라폼) 설치가 반드시 선행되어야 합니다.**

**1단계: Terraform 설치**
PowerShell 프롬프트에서 다음 명령어를 입력하여 Terraform을 설치합니다. `-y` 옵션을 부여하면 설치 중간에 묻는 라이선스 승인 절차를 자동으로 통과하여 무인 설치가 가능합니다.

```powershell
choco install terraform -y

```

**2단계: Terragrunt 설치**
Terraform 설치가 완료되면, 이어서 Terragrunt를 설치합니다.

```powershell
choco install terragrunt -y

```

### 3. 설치 검증 및 환경 확인

설치가 성공적으로 끝났다면, 현재 열려있는 PowerShell 창을 닫고 **새로운 PowerShell 창**을 엽니다. (설치 과정에서 추가된 시스템 환경 변수를 터미널에 새로 적용하기 위함입니다.)

새로운 프롬프트에서 다음 명령어를 차례대로 실행하여 정상적으로 바이너리가 호출되는지 확인합니다.

```powershell
terraform -version
terragrunt -version

```

정상적으로 각 도구의 버전 정보가 출력된다면, 로컬 PC에서 AWS(Amazon Web Services, 아마존 웹 서비스) 등의 클라우드 자원을 프로비저닝(Provisioning, IT 인프라 자원을 할당하고 배치하여 사용할 수 있도록 준비하는 과정)할 준비가 완벽하게 끝난 것입니다.

### 💡 실전 팁 및 자주 하는 오해

> **❌ 흔한 오해: "Terragrunt만 설치하면 바로 인프라 코드를 작성하고 배포할 수 있다."**
> **✅ 실전 아키텍트의 관점:**
> 앞서 아키텍처의 의존성을 강조했듯, Terragrunt는 Terraform의 기능을 호출하여 인프라 코드의 **DRY (Don't Repeat Yourself, 중복 배제)** 원칙을 지키게 해주는 관리 도구입니다. 백엔드(Backend, 상태 파일 저장소) 구성이나 공급자(Provider, 클라우드 벤더 플러그인) 설정은 Terragrunt가 자동화해 주지만, 실제 클라우드 API를 호출하고 리소스를 생성하는 핵심 엔진 역할은 밑단에 있는 Terraform이 수행합니다. 둘 다 정상적으로 설치되어 있어야 완벽하게 구동됩니다.
> **🔥 실전 운영 팁:**
> 패키지 매니저로 설치한 도구들은 클라우드 환경의 변화에 따라 빠르게 구버전이 됩니다. 새로운 리소스 속성이나 최신 기능을 사용하려면 주기적으로 `choco upgrade terraform -y` 및 `choco upgrade terragrunt -y` 명령어를 통해 최신 버전으로 패치하는 유지보수 작업이 필요합니다. 단, 협업 환경에서는 팀원 간의 버전 파편화로 인해 State(상태) 파일 충돌이 발생할 수 있으므로, 형상 관리 표준에 따라 특정 버전을 고정(Pinning)하여 사용하는 것이 안전한 엔터프라이즈 운영 방식입니다.

---

**용어 설명(주석)**

1. **Chocolatey(초콜레티)**: Windows 운영 체제에서 소프트웨어를 쉽게 설치, 업그레이드, 삭제할 수 있도록 도와주는 CLI (Command Line Interface, 명령줄 인터페이스) 기반의 오픈소스 패키지 관리자입니다. 리눅스의 `apt`, `yum`이나 macOS의 `Homebrew(홈브루)`와 동일한 역할을 수행하여 인프라 엔지니어의 로컬 작업 생산성을 극대화합니다.

---

Next Step: AWS CLI(명령줄 인터페이스) 설치 및 IAM 프로파일 인증 정보 연동 / Terragrunt를 이용한 AWS S3 원격 상태(Remote State) 버킷 구성 실습
