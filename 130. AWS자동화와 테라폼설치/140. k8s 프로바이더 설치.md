이 안내서는 로컬 PC의 **Ubuntu VM (우분투 가상 머신)** 환경에서 **Terraform (테라폼)**을 사용하여 인프라를 프로그래밍 방식으로 제어하기 위한 사전 준비 과정을 다룹니다. 특히 클라우드 환경과의 연결을 위한 보안 설정과 필수 도구 설치를 중심으로 구성되었습니다.

---

## 1. Ubuntu 시스템 업데이트 및 필수 도구 설치

테라폼 설치 전, 시스템을 최신 상태로 유지하고 패키지 관리에 필요한 기본 도구를 설치합니다.

```bash
# 패키지 리스트 업데이트 및 업그레이드
sudo apt-get update && sudo apt-get upgrade -y

# HTTPS 통신 및 인증서 관리를 위한 필수 패키지 설치
sudo apt-get install -y gnupg software-properties-common curl

```

---

## 2. Terraform (테라폼) 설치

HashiCorp의 공식 저장소를 추가하여 테라폼을 설치합니다.

```bash
# 1. HashiCorp GPG 키 추가 (패키지 변조 방지 서명)
wget -O- https://apt.releases.hashicorp.com/gpg | \
gpg --dearmor | \
sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg > /dev/null

# 2. HashiCorp 공식 저장소 등록
echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
https://apt.releases.hashicorp.com $(lsb_release -cs) main" | \
sudo tee /etc/apt/sources.list.d/hashicorp.list

# 3. 저장소 업데이트 및 테라폼 설치
sudo apt-get update && sudo apt-get install terraform -y

# 4. 설치 버전 확인
terraform -version

```

---

## 3. AWS CLI 설치 및 자격 증명 설정

테라폼이 내 PC의 VM에서 AWS 리소스를 생성하려면, AWS 계정의 인증 정보가 VM 내에 저장되어 있어야 합니다.

### 가. AWS CLI 설치

```bash
# AWS CLI v2 다운로드 및 설치
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
sudo apt-get install unzip -y
unzip awscliv2.zip
sudo ./aws/install

# 설치 확인
aws --version

```

### 나. IAM User (식별 및 액세스 관리 사용자) 인증 설정

AWS 웹 콘솔에서 생성한 `Access Key`와 `Secret Key`를 VM에 등록합니다.

```bash
# 인증 정보 입력 모드 실행
aws configure

# 아래와 같이 차례대로 입력합니다.
# AWS Access Key ID [None]: [발급받은 엑세스 키]
# AWS Secret Access Key [None]: [발급받은 비밀 키]
# Default region name [None]: ap-northeast-2 (서울 리전)
# Default output format [None]: json

```

---

## 4. SSH 키페어 생성 (EC2 접속용)

테라폼으로 생성할 EC2 인스턴스에 접속하기 위한 SSH 키를 VM 내부에서 생성해둡니다.

```bash
# SSH 키 저장 디렉토리 생성 및 이동
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# 'terraform-key'라는 이름으로 키 생성 (비밀번호 없이 생성 시 엔터)
ssh-keygen -t rsa -b 4096 -f ~/.ssh/terraform-key

# 공개키(.pub) 내용 확인 (나중에 테라폼 코드에 복사하여 사용)
cat ~/.ssh/terraform-key.pub

```

---

## 5. 테라폼 프로젝트 디렉토리 최적화

작업별로 리소스가 섞이지 않도록 전용 디렉토리를 생성하고 환경을 격리합니다.

```bash
# 프로젝트 폴더 생성
mkdir -p ~/terraform-projects/aws-lab
cd ~/terraform-projects/aws-lab

# 기초 설정 파일 생성 (예시)
touch main.tf variables.tf outputs.tf

```

---

## 6. 보안 및 비용 관리 체크리스트

1. **IAM 권한 최소화**: 테라폼 실행용 계정에는 `AdministratorAccess` 보다는 필요한 서비스(EC2, VPC 등)의 권한만 부여하는 것이 보안상 안전합니다. (**과금 주의**)
2. **.gitignore 설정**: Git을 사용한다면 `terraform.tfstate`나 `.tfvars` 파일이 퍼블릭 저장소에 올라가지 않도록 반드시 제외 처리하세요. (**보안 사고 방지**)
3. **Default VPC 확인**: 테라폼 코드를 실행하기 전, 해당 리전에 기본 VPC가 존재하는지 확인해야 네트워크 에러가 발생하지 않습니다.

---

### 주석 (Annotations)

* **GPG (GNU Privacy Guard, GNU 프라이버시 가드)**: 배포되는 패키지가 변조되지 않았음을 증명하기 위해 사용하는 암호화 서명 도구입니다.
* **CLI (Command Line Interface, 명령줄 인터페이스)**: 터미널 환경에서 명령어를 입력하여 소프트웨어를 제어하는 인터페이스입니다.
* **IAM (Identity and Access Management, 식별 및 액세스 관리)**: AWS 리소스에 대한 접근 권한을 안전하게 제어하는 서비스입니다.
* **VPC (Virtual Private Cloud, 가상 프라이빗 클라우드)**: AWS 클라우드 내 사용자의 논리적으로 격리된 가상 네트워크 공간입니다.
* **TFSTATE (Terraform State, 테라폼 상태 파일)**: 테라폼이 관리하는 인프라의 현재 상태를 기록한 JSON 형식의 파일입니다.

Next Step: 테라폼 기초 문법 및 첫 번째 EC2 배포 코드 작성
