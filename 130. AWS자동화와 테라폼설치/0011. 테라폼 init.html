import React from 'react';
import { 
  RefreshCw, 
  FolderPlus, 
  Settings, 
  Layers, 
  Database, 
  ShieldCheck, 
  Download,
  AlertTriangle,
  Info
} from 'lucide-react';

const App = () => {
  const initTriggers = [
    {
      id: 1,
      title: "신규 프로젝트 시작",
      eng: "New Working Directory (새로운 작업 디렉토리)",
      desc: "새로운 폴더에서 테라폼 구성을 시작할 때 실행하는 필수 첫 단계입니다.",
      icon: <FolderPlus className="w-8 h-8 text-blue-500" />,
      color: "bg-blue-50 border-blue-200"
    },
    {
      id: 2,
      title: "공급자 추가 및 변경",
      eng: "Provider Changes (공급자 구성 변경)",
      desc: "AWS, Azure 등 새로운 Provider(공급자) 설정을 코드에 추가하거나 버전을 바꿀 때 필요합니다.",
      icon: <Settings className="w-8 h-8 text-purple-500" />,
      color: "bg-purple-50 border-purple-200"
    },
    {
      id: 3,
      title: "모듈 설치 및 업데이트",
      eng: "Module Installation (모듈 설치)",
      desc: "외부 소스에서 새로운 Module(모듈)을 호출하거나 경로를 수정했을 때 로컬로 가져옵니다.",
      icon: <Layers className="w-8 h-8 text-green-500" />,
      color: "bg-green-50 border-green-200"
    },
    {
      id: 4,
      title: "백엔드 설정 변경",
      eng: "Backend Configuration (백엔드 구성 변경)",
      desc: "State(상태) 저장소를 로컬에서 S3와 같은 원격지로 옮기거나 설정을 수정할 때 실행합니다.",
      icon: <Database className="w-8 h-8 text-orange-500" />,
      color: "bg-orange-50 border-orange-200"
    }
  ];

  const steps = [
    {
      title: "1. 백엔드 초기화",
      eng: "Backend Initialization (백엔드 초기화)",
      detail: "Terraform State (테라폼 상태 파일)를 어디에 저장하고 잠금(Lock) 처리를 할지 연결 경로를 설정합니다."
    },
    {
      title: "2. 하위 모듈 설치",
      eng: "Child Module Installation (하위 모듈 설치)",
      detail: "코드 내에서 참조하는 외부 모듈의 소스 코드를 .terraform/modules 디렉토리로 복사합니다."
    },
    {
      title: "3. 플러그인 다운로드",
      eng: "Plugin Search & Install (플러그인 검색 및 설치)",
      detail: "작성된 Provider(공급자) 구성에 맞는 실행 파일(Binary)을 다운로드하여 프로젝트에 준비합니다."
    }
  ];

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-8 font-sans">
      <div className="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
        
        {/* Header */}
        <div className="bg-slate-900 p-8 text-white text-center">
          <div className="flex justify-center mb-4">
            <RefreshCw className="w-12 h-12 text-blue-400 animate-spin-slow" />
          </div>
          <h1 className="text-3xl font-bold mb-2">테라폼 초기화(Terraform Init) 기술 가이드</h1>
          <p className="text-slate-400">명령어 실행 시점과 내부 동작 아키텍처의 완벽한 이해</p>
        </div>

        {/* Section 1: When to run */}
        <div className="p-8">
          <div className="flex items-center gap-2 mb-6 border-b pb-2">
            <ShieldCheck className="text-blue-600" />
            <h2 className="text-2xl font-bold text-gray-800">언제 초기화가 필요한가?</h2>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {initTriggers.map((item) => (
              <div key={item.id} className={`p-5 rounded-xl border-2 ${item.color} transition-transform hover:scale-105`}>
                <div className="flex items-start gap-4">
                  <div className="p-3 bg-white rounded-lg shadow-sm">
                    {item.icon}
                  </div>
                  <div>
                    <h3 className="font-bold text-lg text-gray-900">{item.title}</h3>
                    <p className="text-[10px] text-gray-500 mb-2 uppercase tracking-wider font-semibold">{item.eng}</p>
                    <p className="text-sm text-gray-600 leading-relaxed">{item.desc}</p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Section 2: How it works */}
        <div className="bg-slate-50 p-8 border-y border-gray-200">
          <div className="flex items-center gap-2 mb-8">
            <Download className="text-indigo-600" />
            <h2 className="text-2xl font-bold text-gray-800">내부 워크플로우 (Internal Workflow)</h2>
          </div>

          <div className="relative">
            {/* Vertical Line */}
            <div className="absolute left-6 top-0 bottom-0 w-1 bg-indigo-200 hidden md:block"></div>
            
            <div className="space-y-8">
              {steps.map((step, index) => (
                <div key={index} className="relative md:pl-16 flex flex-col md:flex-row gap-4 items-start">
                  <div className="absolute left-3 md:left-4 w-6 h-6 bg-indigo-600 rounded-full border-4 border-white shadow-md z-10 hidden md:block"></div>
                  <div className="bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex-1 w-full">
                    <h4 className="font-bold text-indigo-900 text-lg mb-1">{step.title}</h4>
                    <p className="text-[10px] font-bold text-indigo-400 mb-2 uppercase">{step.eng}</p>
                    <p className="text-sm text-gray-600 leading-snug">{step.detail}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* Section 3: Professional Tips */}
        <div className="p-8">
          <div className="bg-amber-50 rounded-xl p-6 border border-amber-200 shadow-sm">
            <div className="flex items-center gap-2 mb-3 text-amber-800 font-bold">
              <AlertTriangle className="w-5 h-5" />
              <h3>실무 아키텍트 제언 (Architect Tips)</h3>
            </div>
            <ul className="space-y-4 text-sm text-amber-900">
              <li className="flex gap-2">
                <span className="font-bold text-amber-600">01.</span>
                <span><strong>Idempotency (멱등성):</strong> <code>init</code>은 여러 번 실행해도 안전합니다. 구성에 변경이 없다면 기존 파일을 유지하고 동기화 상태만 확인합니다.</span>
              </li>
              <li className="flex gap-2">
                <span className="font-bold text-amber-600">02.</span>
                <span><strong>Dependency Lock (의존성 잠금):</strong> 초기화 시 생성되는 <code>.terraform.lock.hcl</code> 파일은 팀원 간 동일한 환경을 보장하기 위해 반드시 Git에 포함하십시오.</span>
              </li>
              <li className="flex gap-2">
                <span className="font-bold text-amber-600">03.</span>
                <span><strong>Upgrade Option (업그레이드):</strong> 새로운 버전의 Provider를 강제로 적용하려면 <code>terraform init -upgrade</code> 옵션을 사용하십시오.</span>
              </li>
            </ul>
          </div>
        </div>

        {/* Footer Notes */}
        <div className="p-6 bg-gray-100 text-[11px] text-gray-500 border-t">
          <div className="flex items-center gap-1 mb-3 font-bold uppercase text-gray-700">
            <Info className="w-3 h-3" /> 기술 주석 (Terminology)
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-2">
            <div>
              <p className="mb-1"><strong className="text-gray-700">Provider (공급자):</strong> 테라폼이 AWS나 GCP 같은 인프라 플랫폼의 API와 통신할 수 있도록 해주는 핵심 플러그인</p>
              <p><strong className="text-gray-700">Backend (백엔드):</strong> 테라폼의 State(상태) 데이터가 저장되는 물리적 또는 논리적 저장소 (S3, GCS 등)</p>
            </div>
            <div>
              <p className="mb-1"><strong className="text-gray-700">Module (모듈):</strong> 인프라 구성을 논리적인 단위로 그룹화하여 재사용할 수 있게 만든 코드 패키지</p>
              <p><strong className="text-gray-700">Working Directory (작업 디렉토리):</strong> <code>.tf</code> 파일이 위치하며 실제 인프라 명령이 실행되는 로컬 폴더</p>
            </div>
          </div>
        </div>
      </div>

      <style dangerouslySetInnerHTML={{ __html: `
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
          animation: spin-slow 12s linear infinite;
        }
      `}} />
    </div>
  );
};

export default App;
