## Terraform Init(테라폼 초기화)의 실행 시점과 원리

**Terraform Init(테라폼 초기화)** 명령은 단순히 프로바이더 플러그인을 설치하는 것에 그치지 않으며, 새로운 프로젝트를 시작하거나 구성에 변화가 생길 때마다 실행해야 하는 필수적인 단계입니다.

---

### 1. 언제 `terraform init`을 실행해야 하는가?

테라폼 초기화는 다음과 같은 상황에서 반드시 실행해야 합니다.

* **새로운 프로젝트(Working Directory)를 시작할 때:** 새로운 폴더에서 `.tf` 파일을 작성하고 처음 명령어를 실행할 때 필수입니다. 테라폼은 해당 디렉토리를 작업 공간으로 인식하고 필요한 메타데이터를 생성합니다.
* **새로운 프로바이더(Provider)를 추가할 때:**
코드 내에 AWS, Azure, Google Cloud 등 새로운 **Provider(공급자)** 정의를 추가했다면, 관련 플러그인을 다운로드하기 위해 다시 실행해야 합니다.
* **모듈(Module)을 추가하거나 수정할 때:**
외부 소스(GitHub, Terraform Registry 등)로부터 **Module(모듈)**을 가져와 사용하도록 코드를 수정했다면, 테라폼이 해당 모듈의 소스 코드를 로컬로 가져오기 위해 초기화가 필요합니다.
* **백엔드(Backend) 설정을 변경할 때:**
상태 파일(`terraform.tfstate`)을 저장하는 위치를 로컬에서 S3와 같은 원격 **Backend(백엔드)**로 변경하거나 설정값을 수정할 때 실행합니다.

---

### 2. `terraform init`이 수행하는 주요 작업

1. **Backend Initialization (백엔드 초기화):**
테라폼의 상태 관리 방식과 저장소(Local 또는 Remote)를 결정하고 연결합니다.
2. **Child Module Installation (하위 모듈 설치):**
구성 파일에서 참조하는 모든 모듈을 ` .terraform/modules` 디렉토리에 다운로드합니다.
3. **Plugin Search and Installation (플러그인 검색 및 설치):**
정의된 프로바이더의 버전을 확인하고, 실행 파일(Binary)을 `.terraform/providers` 디렉토리에 설치합니다.

---

### 3. 실무 지침 (Best Practices)

* **반복 실행의 안전성:** `terraform init`은 여러 번 실행해도 안전합니다(Idempotent). 이미 설치된 플러그인이 있다면 다시 다운로드하지 않고 건너뜁니다.
* **버전 잠금:** 초기화 시 `terraform.lock.hcl` 파일이 생성되거나 업데이트됩니다. 이 파일은 팀원 간에 동일한 프로바이더 버전을 사용하도록 보장하므로 버전 관리 시스템(Git)에 반드시 포함해야 합니다.

> **주석 (Footnotes)**
> * **Provider (공급자):** 테라폼이 클라우드 서비스나 인프라 플랫폼의 API와 통신할 수 있게 해주는 중계 플러그인입니다.
> * **Backend (백엔드):** 테라폼의 State(상태) 파일이 저장되는 위치를 정의하는 설정입니다.
> * **Module (모듈):** 여러 리소스를 하나의 그룹으로 묶어 재사용 가능하게 만든 테라폼 코드의 묶음입니다.
> * **State (상태):** 테라폼이 관리하는 인프라의 현재 상태를 기록한 JSON 데이터 파일입니다.
> 
> 

---

**Next Step: 테라폼 백엔드 설정 및 S3 원격 저장소 구성 방법**

질문하신 내용에 따라 프로젝트마다, 그리고 구성의 변화가 있을 때마다 초기화가 필요함을 명확히 정리해 드렸습니다. 테라폼을 처음 배우실 때 가장 헷갈리는 부분 중 하나인데, `init`은 '환경을 준비하는 과정'으로 이해하시면 쉽습니다.

* **AWS 사용 시 주의:** S3를 백엔드로 사용할 경우 Standard 요금이 발생할 수 있으며, DynamoDB를 이용한 Lock 설정을 병행할 경우 소액의 읽기/쓰기 비용이 발생할 수 있습니다. (AWS 프리티어 범위 내에서 대부분 커버 가능합니다.)
