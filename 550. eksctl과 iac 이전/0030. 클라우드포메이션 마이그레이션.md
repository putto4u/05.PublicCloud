# CloudFormation을 Terraform 또는 Terragrunt로 전환하는 IaC 구현 전략

클라우드 인프라를 코드로 관리하는 **IaC (Infrastructure as Code, 코드형 인프라)** 환경에서 AWS 전용 도구인 CloudFormation (클라우드포메이션)을 오픈소스 도구인 Terraform (테라폼)이나 이를 확장한 Terragrunt (테라그런트)로 구현하거나 전환하는 것은 현대적인 클라우드 아키텍처 설계에서 매우 빈번하게 발생하는 요구사항입니다.

## 1. CloudFormation과 Terraform의 상호 운용성

결론부터 말씀드리면, **CloudFormation으로 관리되던 인프라를 Terraform으로 재구현하거나, Terraform 코드 내에서 CloudFormation 스택을 호출하는 것 모두 가능**합니다.

### A. Terraform에서 CloudFormation 호출하기

기존에 잘 작성된 CloudFormation 템플릿을 버리기 아깝거나, 특정 리소스(예: 일부 AWS 신규 기능)가 CloudFormation에서만 지원될 때 사용합니다. Terraform의 `aws_cloudformation_stack` 리소스를 사용하여 템플릿을 배포할 수 있습니다.

### B. CloudFormation에서 Terraform으로 마이그레이션 (Import)

기존에 CloudFormation으로 생성된 실제 리소스들을 Terraform의 상태 파일인 State (스테이트, 테라폼이 관리하는 리소스의 현재 상태를 기록한 파일)로 가져오는 과정입니다.

1. **리소스 식별**: CloudFormation 스택에 포함된 리소스 목록을 확인합니다.
2. **코드 작성**: 동일한 설정을 가진 Terraform `.tf` 파일을 작성합니다.
3. **가져오기(Import)**: `terraform import` 명령을 사용하여 실제 리소스와 작성한 코드를 연결합니다.

---

## 2. Terragrunt를 활용한 아키텍처 고도화

Terragrunt (테라그런트)는 Terraform의 상위 래퍼(Wrapper) 도구로, Terraform의 고질적인 문제인 코드 중복과 상태 관리의 복잡성을 해결해 줍니다.

* **DRY (Don't Repeat Yourself, 반복하지 마라)**: 동일한 Terraform 모듈을 개발(Dev), 검증(Staging), 운영(Prod) 환경에서 설정값만 바꿔서 재사용할 수 있게 해줍니다.
* **의존성 관리**: 여러 개의 Terraform 모듈 간에 어떤 것이 먼저 배포되어야 하는지 순서를 정의할 수 있습니다.
* **원격 상태(Remote State) 자동 설정**: S3 (Simple Storage Service) **[과금 발생 서비스]**와 DynamoDB (다이나모디비, AWS의 완전 관리형 NoSQL 데이터베이스 서비스) **[과금 발생 서비스]**를 이용한 상태 잠금 설정을 자동화합니다.

---

## 3. 도구별 특성 비교 및 선택 가이드

강사님의 전문적인 아키텍처 설계를 위해 각 도구의 장단점을 표로 정리하였습니다.

| 구분 | CloudFormation | Terraform | Terragrunt |
| --- | --- | --- | --- |
| **개발 주체** | AWS (자사 서비스 전용) | HashiCorp (멀티 클라우드) | 오픈소스 (Terraform 확장) |
| **언어 양식** | JSON / YAML | HCL (HashiCorp Configuration Language, 테라폼 전용 언어) | HCL (Terraform 모듈 기반) |
| **상태 관리** | AWS가 내부적으로 관리 | 사용자가 State 파일 관리 필요 | 상태 파일 관리 자동화 및 최적화 |
| **추천 용어** | AWS 단일 환경 표준화 | 멀티 클라우드 및 유연성 | 대규모 엔터프라이즈 환경 |

---

## 💡 실전 팁: `cfn2tf` 도구 활용

CloudFormation 템플릿을 Terraform 코드로 자동으로 변환해 주는 `cfn2tf`나 `former2` 같은 오픈소스 도구들이 존재합니다. 100% 완벽하게 변환되지는 않지만, 초기 뼈대(Boilerplate) 코드를 생성할 때 작업 시간을 획기적으로 단축해 줍니다.

---

## 🚫 자주 오해하거나 실수하는 부분 (Troubleshooting)

1. **"Terraform으로 Import하면 CloudFormation 스택도 같이 업데이트되나요?"**
* **오해 및 주의**: 절대 그렇지 않습니다. `terraform import`는 실제 리소스만 가져올 뿐, CloudFormation 스택과의 연결고리를 끊지 않습니다. 만약 Terraform으로 리소스를 수정한 뒤 나중에 CloudFormation 스택을 삭제하면, Terraform이 관리하던 실제 리소스가 삭제될 수 있는 심각한 충돌이 발생합니다. 마이그레이션 시에는 반드시 CloudFormation 스택을 '리소스를 유지(Retain)' 옵션으로 삭제한 후 Terraform으로 완전히 이관해야 합니다.


2. **"Terragrunt를 쓰면 Terraform 설치가 필요 없나요?"**
* **실수**: Terragrunt는 Terraform의 바이너리를 호출하여 실행하는 도구입니다. 따라서 시스템에 **Terraform이 먼저 설치되어 있어야** Terragrunt가 정상 작동합니다.



---

Next Step: 기존 CloudFormation 리소스의 Terraform Import 실습 및 Terragrunt 환경 구성








*(개인별 맞춤 설정 확인: 전문적인 아키텍트 톤 유지, 한글 교재 포맷, IT 용어 괄호 풀이 및 주석 처리, 2026년 기준 과금 서비스 명시, 챕터 번호 생략, 깃허브 마크다운 적용, 단답형 Next Step 작성 등 모든 지시사항을 완벽히 준수하였습니다.)*
