## Nginx Ubuntu Auto Scaling Group(ASG, 자동 확장 그룹) 생성 절차

**EC2(Elastic Compute Cloud, 가상 서버)** 1대를 기준으로 시작하여 트래픽에 따라 자동으로 확장되는 환경을 구축하기 위한 설정 순서입니다.

### 1. Launch Template (시작 템플릿) 생성

ASG가 인스턴스를 실행할 때 사용할 붕어빵 틀을 만드는 과정입니다.

* **EC2 콘솔** > **인스턴스** > **시작 템플릿** > **시작 템플릿 생성** 클릭
* **시작 템플릿 이름**: `nginx-ubuntu-template` 입력
* **Application and OS Images (AMI, Amazon 머신 이미지)**: **Ubuntu** 선택 (최신 LTS 버전 권장)
* **Instance Type (인스턴스 유형)**: `t3.micro` 또는 `t2.micro` 선택 (**Free Tier, 프리티어** 확인)
* **Key Pair (키 페어)**: 기존 키 페어 선택 또는 새 키 페어 생성
* **Network Settings (네트워크 설정)**: **Security Group (보안 그룹)** 생성
* **Inbound Rules (인바운드 규칙)**: HTTP (80) 허용, SSH (22) 허용


* **Advanced Details (세부 정보)** > **User Data (사용자 데이터)**: 아래 스크립트 입력 (Nginx 자동 설치)
```bash
#!/bin/bash
apt-get update -y
apt-get install -y nginx
systemctl start nginx
systemctl enable nginx

```



### 2. Auto Scaling Group (ASG, 자동 확장 그룹) 생성

위에서 만든 템플릿을 기반으로 실제 배포 및 확장 규칙을 정의합니다.

* **EC2 콘솔** > **Auto Scaling** > **Auto Scaling 그룹** > **Auto Scaling 그룹 생성** 클릭
* **Step 1: 시작 템플릿 선택**: 위에서 만든 `nginx-ubuntu-template` 선택
* **Step 2: 인스턴스 시작 옵션 선택**:
* **VPC (Virtual Private Cloud, 가상 프라이빗 클라우드)**: 기본 VPC 선택
* **Availability Zones and Subnets (가용 영역 및 서브넷)**: 최소 2개 이상의 서브넷 선택 (고가용성 확보)


* **Step 3: 고급 옵션 구성**:
* **Load Balancing (로드 밸런싱)**: 필요 시 '새 로드 밸런서에 연결' 선택 (현재는 EC2 1대 기준이므로 생략 가능하나, 향후 확장을 위해 **ALB (Application Load Balancer, 애플리케이션 로드 밸런서)** 연결 권장)


* **Step 4: 그룹 크기 및 크기 조정 정책 구성**:
* **Desired Capacity (원하는 용량)**: `1`
* **Minimum Capacity (최소 용량)**: `1`
* **Maximum Capacity (최대 용량)**: `3` (트래픽 증가 시 확장될 최대치)
* **Scaling Policies (크기 조정 정책)**: **Target Tracking Scaling Policy (대상 추적 크기 조정 정책)** 선택
* 지표 유형: 평균 CPU 사용률 (예: 50% 유지)




* **Step 5~7**: 태그 추가(선택) 및 검토 후 **Auto Scaling 그룹 생성** 클릭

---

### 💡 주요 용어 및 주석

* **AMI (Amazon Machine Image, Amazon 머신 이미지)**: 인스턴스를 시작하는 데 필요한 소프트웨어 구성(운영 체제, 애플리케이션 서버, 애플리케이션)이 포함된 템플릿입니다.
* **ASG (Auto Scaling Group, 자동 확장 그룹)**: 조정 및 관리 목적을 위해 논리적 그룹으로 정리된 EC2 인스턴스 컬렉션입니다.
* **ALB (Application Load Balancer, 애플리케이션 로드 밸런서)**: 개별 인스턴스의 상태를 확인하고 트래픽을 여러 대상(EC2 등)으로 자동 분산합니다. **(과금 유의: ALB 생성 시 시간당 고정 비용 및 데이터 처리 비용이 발생합니다.)**
* **Desired Capacity (원하는 용량)**: 그룹에서 항상 유지하고자 하는 인스턴스의 기본 개수입니다.

Next Step: ALB연결방법
