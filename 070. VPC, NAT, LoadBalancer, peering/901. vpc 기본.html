<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EKS 마스터 클래스: 이해와 아키텍처</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Chart Container Styling per requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        
        /* Custom Scrollbar for better UX */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .active-tab {
            border-bottom: 2px solid #2563eb;
            color: #2563eb;
            font-weight: 600;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals with Corporate Blue/Orange Accents (AWS-inspired but softer) -->
    <!-- Application Structure Plan: Dashboard-style single page with side navigation (mobile drawer). Content is divided into logical 'Learning Modules': 
         1. Overview (Context), 
         2. The Problem (Vanilla K8s Pain Points), 
         3. The Solution (EKS Architecture & Responsibility shift), 
         4. Comparison Deep Dive (Interactive Matrix), 
         5. Cost Simulator (Interactive Chart), 
         6. Architecture Decisions (Node Types). 
         This structure guides the user from 'Why' to 'What' to 'How', culminating in practical decision-making tools (Cost & Node selection). -->
    <!-- Visualization & Content Choices: 
         1. Vanilla vs EKS Responsibility: Interactive Toggle Stacked Divs (HTML/CSS) - Goal: Visualize the shift in operational burden.
         2. Cost Calculator: Chart.js Bar Chart - Goal: Demystify the pricing model with real-time feedback.
         3. Comparison Matrix: Interactive Table with Row Highlighting - Goal: Clear side-by-side analysis without overwhelming text.
         4. Node Selector: Card Grid with Expandable Details - Goal: simplify the complex choice between Managed, Fargate, and Self-managed.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased selection:bg-blue-100">

    <!-- Mobile Header -->
    <div class="lg:hidden flex items-center justify-between p-4 bg-white shadow-sm sticky top-0 z-50">
        <h1 class="text-xl font-bold text-slate-800">EKS Masterclass</h1>
        <button id="mobile-menu-btn" class="text-slate-600 focus:outline-none p-2 rounded hover:bg-slate-100">
            <span class="text-2xl">☰</span>
        </button>
    </div>

    <div class="flex flex-col lg:flex-row min-h-screen">
        
        <!-- Sidebar Navigation -->
        <nav id="sidebar" class="hidden lg:flex flex-col w-64 bg-white border-r border-slate-200 fixed h-full z-40 transition-transform duration-300 transform lg:translate-x-0 -translate-x-full">
            <div class="p-6 border-b border-slate-100">
                <div class="flex items-center gap-2">
                    <span class="text-2xl text-orange-500">☸️</span>
                    <h1 class="text-xl font-bold tracking-tight text-slate-800">EKS 이해</h1>
                </div>
                <p class="text-xs text-slate-500 mt-2">강의 01: 기본 개념 및 아키텍처</p>
            </div>
            <div class="flex-1 overflow-y-auto py-4">
                <ul class="space-y-1 px-3">
                    <li><button onclick="scrollToSection('intro')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">🚀 시작하기: K8s와 EKS</button></li>
                    <li><button onclick="scrollToSection('pain-points')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">😓 바닐라 K8s의 한계</button></li>
                    <li><button onclick="scrollToSection('responsibility')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">🤝 책임 모델 변화 (Interactive)</button></li>
                    <li><button onclick="scrollToSection('comparison')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">⚖️ K8s vs EKS 비교 분석</button></li>
                    <li><button onclick="scrollToSection('cost')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">💰 비용 계산기</button></li>
                    <li><button onclick="scrollToSection('nodes')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">🏗️ 워커 노드 옵션</button></li>
                    <li><button onclick="scrollToSection('insights')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors text-slate-600">💡 전문가 인사이트</button></li>
                </ul>
            </div>
            <div class="p-4 border-t border-slate-100 bg-slate-50">
                <p class="text-xs text-slate-400 text-center">Generated for Canvas Learning</p>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 lg:ml-64 p-6 lg:p-10 max-w-7xl mx-auto w-full">
            
            <!-- Intro Section -->
            <section id="intro" class="mb-16 fade-in">
                <div class="bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-8 text-white shadow-lg mb-8">
                    <h2 class="text-3xl lg:text-4xl font-bold mb-4">Amazon EKS 완전 정복</h2>
                    <p class="text-blue-100 text-lg max-w-2xl leading-relaxed">
                        클라우드 네이티브 환경의 표준, 쿠버네티스(K8s).<br>
                        하지만 직접 운영하기엔 너무 복잡합니다. AWS 환경에서 쿠버네티스를 최적화한 <strong>EKS</strong>의 핵심 가치와 아키텍처를 학습해보세요.
                    </p>
                </div>
                
                <div class="prose max-w-none text-slate-600 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold text-slate-800 mb-3">강의 개요</h3>
                    <p class="mb-4">
                        현대의 애플리케이션 배포는 컨테이너 오케스트레이션이 필수적입니다. 본 학습 모듈에서는 순수 K8s(Vanilla Kubernetes)와 AWS의 완전 관리형 서비스인 EKS를 비교하며, 왜 엔터프라이즈 환경에서 EKS가 선호되는지 그 기술적, 운영적 이유를 탐구합니다.
                    </p>
                    <div class="flex gap-4 flex-wrap">
                        <span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-semibold border border-slate-200">#ContainerOrchestration</span>
                        <span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-semibold border border-slate-200">#AWS</span>
                        <span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-semibold border border-slate-200">#Kubernetes</span>
                        <span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-semibold border border-slate-200">#DevOps</span>
                    </div>
                </div>
            </section>

            <!-- Pain Points Section -->
            <section id="pain-points" class="mb-16 scroll-mt-24">
                <div class="flex items-center gap-3 mb-6">
                    <span class="bg-red-100 text-red-600 p-2 rounded-lg text-2xl">😓</span>
                    <h2 class="text-2xl font-bold text-slate-800">바닐라 쿠버네티스의 한계 (Self-Managed)</h2>
                </div>
                <p class="text-slate-600 mb-8 max-w-3xl">
                    "바닐라 K8s"는 클라우드 제공자의 도움 없이 오픈소스를 직접 설치하여 운영하는 것을 말합니다. 강력하지만, 이를 유지하기 위한 엔지니어링 비용은 상상을 초월합니다.
                </p>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <h3 class="font-bold text-lg text-slate-800 mb-3 flex items-center">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                            컨트롤 플레인 관리의 악몽
                        </h3>
                        <p class="text-sm text-slate-600 leading-relaxed">
                            두뇌 역할을 하는 <strong>Control Plane</strong>(API 서버, etcd 등)을 직접 설치하고, 이중화(HA)를 위해 여러 가용 영역(AZ)에 배치해야 합니다. 서버가 죽으면 클러스터 전체가 마비됩니다.
                        </p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <h3 class="font-bold text-lg text-slate-800 mb-3 flex items-center">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                            etcd 데이터베이스 관리
                        </h3>
                        <p class="text-sm text-slate-600 leading-relaxed">
                            클러스터의 모든 상태를 저장하는 <strong>etcd</strong>는 매우 민감합니다. <br>
                            <span class="bg-red-50 text-red-700 px-1 rounded text-xs">SPOF(단일 장애점)</span>가 되지 않도록 쿼럼(Quorum)을 유지하고, 정기적으로 백업/복구 시나리오를 테스트해야 합니다.
                        </p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <h3 class="font-bold text-lg text-slate-800 mb-3 flex items-center">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                            복잡한 업그레이드
                        </h3>
                        <p class="text-sm text-slate-600 leading-relaxed">
                            K8s는 약 3~4개월마다 새 버전이 나옵니다. 마스터 노드와 워커 노드를 순차적으로 업그레이드하는 과정에서 서비스 다운타임이 발생할 위험이 큽니다.
                        </p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <h3 class="font-bold text-lg text-slate-800 mb-3 flex items-center">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                            네트워크 구성 (Overlay Network)
                        </h3>
                        <p class="text-sm text-slate-600 leading-relaxed">
                            Flannel, Calico 같은 CNI 플러그인을 직접 구성해야 하며, 이는 AWS VPC 네트워크와 별개로 동작하여 성능 저하 및 디버깅의 어려움을 초래할 수 있습니다.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Responsibility Model Section -->
            <section id="responsibility" class="mb-16 scroll-mt-24">
                <div class="flex items-center gap-3 mb-6">
                    <span class="bg-green-100 text-green-600 p-2 rounded-lg text-2xl">🤝</span>
                    <h2 class="text-2xl font-bold text-slate-800">EKS 공동 책임 모델</h2>
                </div>
                <p class="text-slate-600 mb-6 max-w-3xl">
                    EKS는 "완전 관리형(Fully-Managed)" 서비스입니다. 이는 AWS가 어디까지 책임지고, 사용자는 무엇에 집중하면 되는지를 명확히 구분해줍니다. 아래 스위치를 눌러 책임의 변화를 확인하세요.
                </p>

                <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-lg">
                    <div class="flex justify-center mb-8">
                        <div class="bg-slate-100 p-1 rounded-lg flex relative">
                            <button onclick="setResponsibility('vanilla')" id="btn-vanilla" class="px-6 py-2 rounded-md text-sm font-semibold transition-all bg-white text-slate-800 shadow-sm">Vanilla K8s (Self-Managed)</button>
                            <button onclick="setResponsibility('eks')" id="btn-eks" class="px-6 py-2 rounded-md text-sm font-semibold transition-all text-slate-500 hover:text-slate-700">Amazon EKS</button>
                        </div>
                    </div>

                    <div class="max-w-md mx-auto space-y-2 relative">
                        <!-- Labels -->
                        <div class="absolute -left-32 top-10 text-right text-xs font-bold text-slate-400 hidden md:block">
                            제어 영역<br>(Control Plane)
                        </div>
                        <div class="absolute -left-32 top-40 text-right text-xs font-bold text-slate-400 hidden md:block">
                            데이터 영역<br>(Data Plane)
                        </div>

                        <!-- Stack Items -->
                        <!-- Control Plane Components -->
                        <div id="layer-etcd" class="responsibility-layer p-3 rounded text-center text-sm font-bold text-white transition-colors duration-500 bg-orange-500">
                            etcd (Data Store)
                        </div>
                        <div id="layer-api" class="responsibility-layer p-3 rounded text-center text-sm font-bold text-white transition-colors duration-500 bg-orange-500">
                            API Server & Scheduler
                        </div>
                        <div id="layer-ccm" class="responsibility-layer p-3 rounded text-center text-sm font-bold text-white transition-colors duration-500 bg-orange-500">
                            Cloud Controller Manager
                        </div>

                        <!-- Spacer -->
                        <div class="h-2"></div>

                        <!-- Data Plane Components -->
                        <div class="bg-blue-600 p-3 rounded text-center text-sm font-bold text-white relative">
                            Worker Nodes (EC2 / Fargate)
                            <span class="absolute right-2 top-2 text-xs opacity-70">User/AWS*</span>
                        </div>
                        <div class="bg-blue-600 p-3 rounded text-center text-sm font-bold text-white">
                            Pod Networking (CNI)
                        </div>
                        <div class="bg-indigo-600 p-3 rounded text-center text-sm font-bold text-white">
                            Customer Application
                        </div>
                    </div>

                    <div class="mt-8 text-center text-sm">
                        <div class="inline-flex items-center gap-6">
                            <div class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-orange-500"></span>
                                <span class="text-slate-600">사용자 관리 (힘듦)</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-green-500"></span>
                                <span class="text-slate-600">AWS 관리 (편함)</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-blue-600"></span>
                                <span class="text-slate-600">사용자 관리 (비즈니스 로직)</span>
                            </div>
                        </div>
                        <p id="resp-desc" class="mt-4 text-slate-500 italic bg-slate-50 p-3 rounded-lg border border-slate-100">
                            바닐라 K8s에서는 etcd, API 서버 등 컨트롤 플레인의 모든 구성요소를 사용자가 직접 설치, 패치, 백업해야 합니다.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Comparison Matrix -->
            <section id="comparison" class="mb-16 scroll-mt-24">
                <div class="flex items-center gap-3 mb-6">
                    <span class="bg-indigo-100 text-indigo-600 p-2 rounded-lg text-2xl">⚖️</span>
                    <h2 class="text-2xl font-bold text-slate-800">상세 비교 분석</h2>
                </div>
                <p class="text-slate-600 mb-6">
                    EKS 도입 시 얻을 수 있는 이점과 변화되는 운영 포인트를 비교했습니다. 항목에 마우스를 올려 자세한 내용을 확인하세요.
                </p>

                <div class="overflow-hidden rounded-xl border border-slate-200 shadow-sm bg-white">
                    <table class="w-full text-left text-sm">
                        <thead class="bg-slate-50 text-slate-700 font-semibold border-b border-slate-200">
                            <tr>
                                <th class="p-4">구분</th>
                                <th class="p-4 w-2/5">Vanilla Kubernetes</th>
                                <th class="p-4 w-2/5 text-blue-700 bg-blue-50">Amazon EKS ✅</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr class="group hover:bg-slate-50 transition-colors cursor-pointer" onclick="alert('EKS는 버튼 클릭 한 번으로 수 분 내에 고가용성 컨트롤 플레인을 생성합니다.')">
                                <td class="p-4 font-medium text-slate-900">프로비저닝</td>
                                <td class="p-4 text-slate-600">서버 생성, 네트워크 설정, 컴포넌트 설치 수동 진행</td>
                                <td class="p-4 text-blue-700 font-medium bg-blue-50/30 group-hover:bg-blue-50">AWS 자동 생성 (완전 관리형)</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-medium text-slate-900">고가용성 (HA)</td>
                                <td class="p-4 text-slate-600">다중 AZ(가용영역)에 마스터 노드 직접 분산 배치 필요</td>
                                <td class="p-4 text-blue-700 font-medium bg-blue-50/30 group-hover:bg-blue-50">기본적으로 3개 AZ에 분산 배치 보장</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-medium text-slate-900">etcd 관리</td>
                                <td class="p-4 text-slate-600">백업 스크립트 작성 및 복구 훈련 필요 (사용자 책임)</td>
                                <td class="p-4 text-blue-700 font-medium bg-blue-50/30 group-hover:bg-blue-50">AWS가 자동 백업 및 암호화(KMS) 관리</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-medium text-slate-900">네트워킹</td>
                                <td class="p-4 text-slate-600">Overlay Network 별도 구성 필요 (복잡함)</td>
                                <td class="p-4 text-blue-700 font-medium bg-blue-50/30 group-hover:bg-blue-50">VPC CNI 플러그인 제공 (Native IP 사용)</td>
                            </tr>
                            <tr class="group hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-medium text-slate-900">비용 구조</td>
                                <td class="p-4 text-slate-600">컨트롤 플레인용 인스턴스 비용만 발생</td>
                                <td class="p-4 text-blue-700 font-medium bg-blue-50/30 group-hover:bg-blue-50">클러스터당 $0.10/시간 + 워커 노드 비용</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Cost Calculator Section -->
            <section id="cost" class="mb-16 scroll-mt-24">
                <div class="flex items-center gap-3 mb-6">
                    <span class="bg-yellow-100 text-yellow-600 p-2 rounded-lg text-2xl">💰</span>
                    <h2 class="text-2xl font-bold text-slate-800">EKS 예상 비용 계산기</h2>
                </div>
                <div class="bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-lg">
                    <div class="grid lg:grid-cols-2 gap-8 items-center">
                        <div class="space-y-6">
                            <p class="text-slate-600 text-sm">
                                EKS는 완전 관리형 서비스이므로 <strong>유료</strong>입니다. 클러스터 유지 비용과 워커 노드(EC2) 비용을 합산하여 예상 월 비용을 확인해보세요.
                                <br><span class="text-xs text-slate-400">*실습 후 반드시 삭제해야 과금을 방지할 수 있습니다.</span>
                            </p>

                            <!-- Inputs -->
                            <div>
                                <label class="block text-sm font-semibold text-slate-700 mb-2">운영 클러스터 수 (개)</label>
                                <input type="range" id="cluster-count" min="1" max="10" value="1" class="w-full accent-blue-600 cursor-pointer" oninput="updateCost()">
                                <div class="flex justify-between text-xs text-slate-500 mt-1">
                                    <span>1개</span>
                                    <span id="cluster-val" class="font-bold text-blue-600 text-base">1개</span>
                                    <span>10개</span>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-slate-700 mb-2">워커 노드 수 (인스턴스 개수)</label>
                                <input type="range" id="node-count" min="1" max="50" value="3" class="w-full accent-blue-600 cursor-pointer" oninput="updateCost()">
                                <div class="flex justify-between text-xs text-slate-500 mt-1">
                                    <span>1개</span>
                                    <span id="node-val" class="font-bold text-blue-600 text-base">3개</span>
                                    <span>50개</span>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-slate-700 mb-2">인스턴스 타입 (시간당 비용)</label>
                                <select id="instance-type" class="w-full p-2 border border-slate-300 rounded-lg text-sm" onchange="updateCost()">
                                    <option value="0.0416">t3.medium ($0.0416/hr) - 실습용</option>
                                    <option value="0.096">m5.large ($0.096/hr) - 일반용</option>
                                    <option value="0.192">c5.xlarge ($0.192/hr) - 컴퓨팅 최적화</option>
                                    <option value="0.384">r5.xlarge ($0.384/hr) - 메모리 최적화</option>
                                </select>
                            </div>

                            <div class="bg-blue-50 p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm text-slate-600">EKS 클러스터 비용:</span>
                                    <span id="cost-cluster" class="font-bold text-slate-800">$73.00</span>
                                </div>
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm text-slate-600">워커 노드 비용:</span>
                                    <span id="cost-nodes" class="font-bold text-slate-800">$91.10</span>
                                </div>
                                <div class="border-t border-blue-200 my-2"></div>
                                <div class="flex justify-between items-center">
                                    <span class="font-bold text-blue-800">예상 월 청구액:</span>
                                    <span id="cost-total" class="text-2xl font-bold text-blue-600">$164.10</span>
                                </div>
                            </div>
                        </div>

                        <!-- Visualization -->
                        <div class="flex flex-col items-center">
                            <div class="chart-container">
                                <canvas id="costChart"></canvas>
                            </div>
                            <p class="text-xs text-center text-slate-400 mt-2">
                                *가격은 리전(Region) 및 AWS 정책에 따라 상이할 수 있습니다. (월 730시간 기준)
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Worker Node Options -->
            <section id="nodes" class="mb-16 scroll-mt-24">
                <div class="flex items-center gap-3 mb-6">
                    <span class="bg-purple-100 text-purple-600 p-2 rounded-lg text-2xl">🏗️</span>
                    <h2 class="text-2xl font-bold text-slate-800">워커 노드 전략</h2>
                </div>
                <p class="text-slate-600 mb-8">
                    EKS 컨트롤 플레인은 AWS가 관리하지만, 데이터 플레인(워커 노드)은 사용자의 워크로드 특성에 맞춰 선택할 수 있습니다.
                </p>

                <div class="grid lg:grid-cols-3 gap-6">
                    <!-- Option 1 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 hover:border-purple-300 hover:shadow-lg transition-all flex flex-col">
                        <div class="text-4xl mb-4">🖥️</div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Managed Node Groups</h3>
                        <span class="inline-block bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full w-fit mb-4">표준 권장</span>
                        <p class="text-sm text-slate-600 flex-grow">
                            AWS가 EC2 인스턴스의 프로비저닝과 생명주기를 관리합니다. OS 패치나 버전 업그레이드를 자동화하면서도, 필요 시 EC2에 SSH 접속이 가능합니다.
                        </p>
                        <ul class="text-xs text-slate-500 mt-4 space-y-1">
                            <li>✅ 운영체제 패치 자동화</li>
                            <li>✅ EC2 직접 제어 가능</li>
                            <li>💰 EC2 인스턴스 비용 발생</li>
                        </ul>
                    </div>

                    <!-- Option 2 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 hover:border-purple-300 hover:shadow-lg transition-all flex flex-col">
                        <div class="text-4xl mb-4">👻</div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2">AWS Fargate</h3>
                        <span class="inline-block bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full w-fit mb-4">Serverless</span>
                        <p class="text-sm text-slate-600 flex-grow">
                            서버 관리가 필요 없는 <strong>서버리스</strong> 방식입니다. EC2 인스턴스 없이 Pod 단위로 필요한 CPU/Memory만 할당받아 실행합니다.
                        </p>
                        <ul class="text-xs text-slate-500 mt-4 space-y-1">
                            <li>✅ 노드 관리 불필요 (보안↑)</li>
                            <li>✅ Pod 단위 격리</li>
                            <li>💰 vCPU/Memory 사용량 과금</li>
                        </ul>
                    </div>

                    <!-- Option 3 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 hover:border-purple-300 hover:shadow-lg transition-all flex flex-col">
                        <div class="text-4xl mb-4">🛠️</div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Self-Managed Nodes</h3>
                        <span class="inline-block bg-slate-100 text-slate-700 text-xs px-2 py-1 rounded-full w-fit mb-4">고급 사용자</span>
                        <p class="text-sm text-slate-600 flex-grow">
                            사용자가 직접 EC2를 생성하고 스크립트로 연결하는 전통적 방식입니다. 특수한 커스텀 AMI나 커널 튜닝이 필요할 때 제한적으로 사용됩니다.
                        </p>
                        <ul class="text-xs text-slate-500 mt-4 space-y-1">
                            <li>✅ 완벽한 커스터마이징</li>
                            <li>⚠️ 높은 운영 복잡도</li>
                            <li>💰 EC2 인스턴스 비용 발생</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Expert Insights -->
            <section id="insights" class="mb-20 scroll-mt-24">
                <div class="bg-slate-800 text-white rounded-2xl p-8 shadow-xl">
                    <div class="flex items-center gap-3 mb-6">
                        <span class="text-3xl">💡</span>
                        <h2 class="text-2xl font-bold">전문가의 조언 & 오해</h2>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="bg-slate-700/50 p-4 rounded-lg border-l-4 border-yellow-400">
                            <h3 class="font-bold text-lg text-yellow-400 mb-2">Q. EKS를 쓰면 K8s 관리를 전혀 안 해도 되나요?</h3>
                            <p class="text-slate-300 text-sm leading-relaxed">
                                <strong>아닙니다.</strong> EKS는 컨트롤 플레인만 관리해줍니다. <br>
                                워커 노드의 OS 보안 패치, API 버전 변경(Deprecation) 대응, Pod 리소스 제한(Limit) 설정, 헬스 체크 구성 등은 여전히 <strong>사용자의 몫</strong>입니다.
                            </p>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-slate-700/30 p-4 rounded-lg">
                                <h4 class="font-bold text-white mb-2">🔒 IAM 통합과 보안 (IRSA)</h4>
                                <p class="text-slate-400 text-xs">
                                    EKS의 핵심 보안은 AWS IAM과 K8s RBAC의 통합입니다. <strong>IRSA (IAM Roles for Service Accounts)</strong>를 통해 파드(Pod) 단위로 S3나 DynamoDB 접근 권한을 최소한으로 부여하는 것이 보안의 핵심입니다.
                                </p>
                            </div>
                            <div class="bg-slate-700/30 p-4 rounded-lg">
                                <h4 class="font-bold text-white mb-2">🔄 버전 수명 주기</h4>
                                <p class="text-slate-400 text-xs">
                                    K8s 버전은 영구적이지 않습니다(약 14개월). 지원 종료 시 강제 업그레이드될 수 있으므로, 정기적인 업그레이드 계획을 세우는 것이 아키텍트의 필수 역량입니다.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // 1. Navigation Logic
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const sidebar = document.getElementById('sidebar');
        let isMenuOpen = false;

        mobileMenuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                sidebar.classList.remove('-translate-x-full');
            } else {
                sidebar.classList.add('-translate-x-full');
            }
        });

        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
                // Close mobile menu if open
                if (window.innerWidth < 1024) {
                    sidebar.classList.add('-translate-x-full');
                    isMenuOpen = false;
                }
            }
        }

        // 2. Responsibility Model Interaction
        const layers = {
            etcd: document.getElementById('layer-etcd'),
            api: document.getElementById('layer-api'),
            ccm: document.getElementById('layer-ccm')
        };
        const desc = document.getElementById('resp-desc');
        const btnVanilla = document.getElementById('btn-vanilla');
        const btnEks = document.getElementById('btn-eks');

        function setResponsibility(mode) {
            if (mode === 'vanilla') {
                // Style Updates
                Object.values(layers).forEach(el => {
                    el.classList.remove('bg-green-500');
                    el.classList.add('bg-orange-500');
                    el.textContent = el.textContent.replace(' (AWS)', '');
                });
                desc.innerText = "바닐라 K8s에서는 etcd, API 서버 등 컨트롤 플레인의 모든 구성요소를 사용자가 직접 설치, 패치, 백업해야 합니다. (운영 부담 높음)";
                
                // Button Styles
                btnVanilla.classList.add('bg-white', 'text-slate-800', 'shadow-sm');
                btnVanilla.classList.remove('text-slate-500');
                btnEks.classList.remove('bg-white', 'text-slate-800', 'shadow-sm');
                btnEks.classList.add('text-slate-500');

            } else {
                // Style Updates
                Object.values(layers).forEach(el => {
                    el.classList.remove('bg-orange-500');
                    el.classList.add('bg-green-500');
                    if(!el.textContent.includes('(AWS)')) el.textContent += " (AWS)";
                });
                desc.innerText = "EKS에서는 컨트롤 플레인(etcd, API 서버 등)을 AWS가 전적으로 관리합니다. 사용자는 워커 노드와 애플리케이션에만 집중하면 됩니다.";

                // Button Styles
                btnEks.classList.add('bg-white', 'text-slate-800', 'shadow-sm');
                btnEks.classList.remove('text-slate-500');
                btnVanilla.classList.remove('bg-white', 'text-slate-800', 'shadow-sm');
                btnVanilla.classList.add('text-slate-500');
            }
        }

        // 3. Cost Calculator Logic & Chart
        let costChart = null;

        function initChart() {
            const ctx = document.getElementById('costChart').getContext('2d');
            costChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['예상 월 비용'],
                    datasets: [
                        {
                            label: 'EKS 클러스터 비용 (Control Plane)',
                            data: [73],
                            backgroundColor: '#2563eb', // Blue-600
                            borderRadius: 4,
                            barPercentage: 0.5
                        },
                        {
                            label: '워커 노드 비용 (Compute)',
                            data: [91],
                            backgroundColor: '#93c5fd', // Blue-300
                            borderRadius: 4,
                            barPercentage: 0.5
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': $' + context.raw.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: true,
                                drawBorder: false
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + value;
                                }
                            },
                            stacked: true
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            stacked: true
                        }
                    }
                }
            });
        }

        function updateCost() {
            const clusters = parseInt(document.getElementById('cluster-count').value);
            const nodes = parseInt(document.getElementById('node-count').value);
            const instancePrice = parseFloat(document.getElementById('instance-type').value);
            
            // Updates labels
            document.getElementById('cluster-val').innerText = clusters + "개";
            document.getElementById('node-val').innerText = nodes + "개";

            // Calculation (Month = 730 hours approx)
            const HOURS_PER_MONTH = 730;
            const EKS_PRICE_PER_HOUR = 0.10;

            const clusterCost = clusters * EKS_PRICE_PER_HOUR * HOURS_PER_MONTH;
            const nodeCost = nodes * instancePrice * HOURS_PER_MONTH;
            const totalCost = clusterCost + nodeCost;

            // DOM Update
            document.getElementById('cost-cluster').innerText = '$' + clusterCost.toFixed(2);
            document.getElementById('cost-nodes').innerText = '$' + nodeCost.toFixed(2);
            document.getElementById('cost-total').innerText = '$' + totalCost.toFixed(2);

            // Chart Update
            if (costChart) {
                costChart.data.datasets[0].data = [clusterCost];
                costChart.data.datasets[1].data = [nodeCost];
                costChart.update();
            }
        }

        // Initialize
        window.addEventListener('load', () => {
            initChart();
            updateCost();
            setResponsibility('vanilla'); // Default state
        });

    </script>
</body>
</html>
