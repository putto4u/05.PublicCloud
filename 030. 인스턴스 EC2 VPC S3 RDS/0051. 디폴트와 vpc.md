## 기본(Default) VPC와 사용자 정의 VPC의 차이 및 필요성

AWS 계정을 생성하면 리전마다 기본적으로 제공되는 **Default VPC**가 이미 존재합니다. 1:1 구성(하나의 VPC에 하나의 서비스 환경)이라 하더라도, 실무와 교육 관점에서는 직접 VPC를 구축하는 **사용자 정의(Custom) VPC** 사용이 강력히 권장됩니다.

---

### 1. Default VPC vs Custom VPC 비교

| 구분 | Default VPC | Custom VPC (직접 만들기) |
| --- | --- | --- |
| **CIDR (IP 범위)** | `172.31.0.0/16` 고정 | 사용자 임의 지정 (예: `10.0.0.0/16`) |
| **서브넷 구성** | 모든 AZ에 Public 서브넷만 존재 | Public/Private 서브넷 설계 가능 |
| **인터넷 연결** | 생성 시 IGW 연결 및 라우팅 완료 | 필요한 경우에만 선택적으로 연결 |
| **보안성** | 모든 인스턴스가 공인 IP를 가짐 | 프라이빗 서브넷을 통한 보안 강화 |

---

### 2. 왜 Default VPC가 있는데도 새로 만드나요?

#### **① 보안 설계 (Isolation)**

Default VPC는 모든 서브넷이 인터넷 게이트웨이(IGW)에 연결된 **Public 서브넷**입니다. 여기에 데이터베이스(RDS)나 백엔드 서버를 두면 외부 노출 위험이 큽니다. Custom VPC를 만들면 외부에서 접근 불가능한 **Private 서브넷**을 직접 구성하여 보안 계층을 분리할 수 있습니다.

#### **② IP 대역 관리 및 충돌 방지**

실무에서는 클라우드와 온프레미스(IDC), 또는 다른 VPC 간을 연결(VPC Peering/VPN)하는 경우가 많습니다. Default VPC는 모든 계정이 동일한 IP 대역(`172.31.x.x`)을 사용하므로, 네트워크 연결 시 **IP 충돌**이 발생하여 통신이 불가능해집니다.

#### **③ 인프라 관리의 명확성 (IaC)**

테라폼과 같은 도구를 사용할 때, 이미 존재하는 리소스를 가져다 쓰는 것보다 **코드(Code)**로 직접 네트워크 바닥부터 정의하는 것이 관리 효율성과 재현성 면에서 훨씬 유리합니다. 특정 서비스 전용 네트워크 환경을 코드로 관리하면 해당 서비스의 라이프사이클에 맞춰 네트워크를 생성하고 삭제하기 쉽습니다.

---

### 3. 실습 시나리오: 언제 무엇을 쓰나?

* **Default VPC를 쓰는 경우:** * 단순 학습용으로 EC2 한 대만 빠르게 띄워보고 싶을 때
* 네트워크 구조에 신경 쓰지 않고 서비스 테스트만 할 때


* **Custom VPC를 직접 만드는 경우 (권장):**
* **강의 교재**로 실무 환경을 구축할 때 (표준 아키텍처 학습)
* 쿠버네티스(EKS) 클러스터를 운영할 때 (워커 노드 보호를 위해 Private 서브넷 필수)
* 보안 인증이 필요한 상용 서비스를 배포할 때



---

### ⚠️ AWS 비용 주의사항 (VPC 구축 시)

사용자 정의 VPC를 만들 때 다음 항목 설정에 따라 비용이 달라집니다.

* **VPC 생성:** 무료입니다.
* **NAT Gateway:** Custom VPC에서 프라이빗 서브넷의 외부 통신을 위해 NAT를 생성하면 **시간당 약 $0.059**가 발생합니다. (Default VPC는 모든 게 퍼블릭이라 NAT가 필요 없지만 보안이 취약함)
* **VPN/Direct Connect:** 외부 네트워크와 연결할 경우 추가 비용이 발생합니다.

---

### 💡 결론

"1:1 환경이라도 **기본 VPC는 연습용 장난감**이고, **Custom VPC는 실제 집을 짓는 기초 공사**"라고 이해하시면 됩니다. 교재 구성 시에는 반드시 사용자 정의 VPC를 직접 만드는 과정을 포함하여 네트워크 흐름을 이해시키는 것이 좋습니다.

---

**Next Step:** 테라폼으로 실무 표준(Public+Private) VPC 구성 자동화하기

Default VPC, Custom VPC, IP 충돌, 보안 계층, NAT 게이트웨이.
