## Amazon S3 (Simple Storage Service) 완전 정복

Amazon S3는 업계 최고의 확장성, 데이터 가용성, 보안 및 성능을 제공하는 **객체 스토리지 서비스**입니다. 데이터 규모와 관계없이 어디서나 원하는 양의 데이터를 저장하고 보호할 수 있습니다.

---

### 1. S3의 핵심 개념: 객체 스토리지

S3는 전통적인 파일 시스템(포맷팅된 드라이브)이나 블록 스토리지와 달리 **'객체(Object)'** 단위로 데이터를 관리합니다.

* **버킷 (Bucket):** 객체를 저장하는 컨테이너입니다. 파일 시스템의 '루트 폴더'와 유사하지만, 이름이 **전 세계에서 유일(Global Unique)**해야 합니다.
* **객체 (Object):** S3에 저장되는 기본 단위입니다. 데이터(파일)와 메타데이터(설정 정보)로 구성됩니다.
* **키 (Key):** 버킷 내에서 객체를 식별하는 고유한 이름(경로 포함)입니다.
* 예: `my-bucket/images/logo.png`에서 키는 `images/logo.png`입니다.



---

### 2. S3 스토리지 클래스 (Storage Classes)

데이터의 접근 빈도와 보관 기간에 따라 적절한 클래스를 선택하여 비용을 최적화할 수 있습니다.

| 클래스 | 설계 목적 | 최소 보관 기간 | 특징 |
| --- | --- | --- | --- |
| **Standard** | 빈번한 액세스 | 없음 | 지연 시간이 짧고 처리량이 높음 (기본값) |
| **Standard-IA** | 간헐적 액세스 | 30일 | 저장 비용은 저렴하나, 데이터 인출 시 비용 발생 |
| **One Zone-IA** | 중요도 낮은 데이터 | 30일 | 단일 가용 영역(AZ)에 저장하여 비용 20% 절감 |
| **Intelligent-Tiering** | 패턴 불분명 | 없음 | 액세스 패턴에 따라 Standard와 IA 계층을 자동 이동 |
| **Glacier (Flexible)** | 장기 아카이브 | 90일 | 저렴한 백업용. 데이터 복구에 수 분~수 시간 소요 |
| **Glacier Deep Archive** | 최저가 보관 | 180일 | 연간 1~2회 접근하는 데이터용. 복구에 12시간 소요 |

---

### 3. 주요 기능 및 특징

#### **데이터 내구성과 가용성**

* **내구성 (Durability):** 99.999999999% (11-nines). 데이터가 유실되지 않을 확률이 극도로 높습니다.
* **가용성 (Availability):** 서비스가 중단 없이 가동될 확률을 의미하며, 클래스별로 차이가 있습니다 (99.9%~99.99%).

#### **정적 웹 호스팅 (Static Web Hosting)**

* HTML, CSS, JavaScript, 이미지와 같은 정적 자원을 서버 없이 웹사이트로 배포할 수 있습니다.
* **Index Document:** 기본 페이지 (예: `index.html`)
* **Error Document:** 오류 발생 시 페이지 (예: `404.html`)

#### **버전 관리 (Versioning)**

* 실수로 객체를 삭제하거나 덮어쓰는 것을 방지하기 위해 동일한 객체의 여러 버전을 보관합니다.
* 삭제된 객체도 '삭제 마커'를 통해 복구할 수 있습니다.

---

### 4. 보안 및 접근 제어

S3는 기본적으로 **Private** 설정으로 생성됩니다. 외부 공개를 위해서는 명시적인 설정이 필요합니다.

1. **IAM Policy:** 특정 사용자나 그룹이 S3에 접근할 수 있는 권한을 정의합니다.
2. **Bucket Policy:** 버킷 수준에서 적용되는 정책으로, 퍼블릭 읽기 권한 등을 부여할 때 사용합니다.
3. **ACL (Access Control List):** 개별 객체에 대한 세부 권한을 제어합니다. (현재는 버킷 정책 권장)
4. **Public Access Block:** 실수로 퍼블릭 권한이 부여되는 것을 원천 차단하는 안전장치입니다.

---

### ⚠️ 비용 발생 및 주의사항

S3 사용 시 다음 3가지 항목에서 비용이 합산됩니다.

* **Storage:** 저장된 데이터의 용량(GB) 및 클래스에 따라 과금됩니다.
* **Requests & Data Retrieval:** GET, PUT 등의 API 요청 횟수와 데이터를 읽어올 때 발생하는 비용입니다.
* **Data Transfer Out:** S3에서 인터넷(외부)으로 나가는 데이터 트래픽 비용입니다. (AWS 내부로 들어오는 Inbound는 무료)

> **주의:** 테라폼으로 버킷 생성 시 `force_destroy = true` 옵션을 주지 않으면, 버킷 안에 객체가 남아있을 때 삭제(`destroy`) 명령이 실패할 수 있습니다.

---

**Next Step:** 테라폼을 활용한 S3 버킷 생성 및 정책 설정 코드 작성

객체 스토리지, 버킷 네이밍, 스토리지 클래스, 정적 호스팅, 비용 최적화.