## AWS VPC (Virtual Private Cloud, 가상 프라이빗 클라우드) 이해

AWS 클라우드를 사용함에 있어 가장 기본이 되는 네트워크 인프라가 바로 **VPC(Virtual Private Cloud)** 입니다. VPC는 AWS 클라우드 내에서 사용자의 계정 전용으로 격리된 가상 네트워크 공간을 제공합니다.

---

### 1. VPC의 정의 및 특징

**VPC(Virtual Private Cloud, 가상 프라이빗 클라우드)** 는 AWS 인프라 내에서 논리적으로 격리된 섹션을 할당하여, 사용자가 정의한 가상 네트워크에서 AWS 리소스를 시작할 수 있게 해주는 서비스입니다.

* **격리성:** 타 사용자의 네트워크와 완전히 분리된 독립적인 환경을 제공합니다.
* **제어권:** IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 네트워크 환경에 대한 완전한 제어권을 가집니다.
* **보안:** **Security Group**(보안 그룹) 및 **NACL**(Network Access Control List, 네트워크 액세스 제어 목록)을 사용하여 인스턴스 및 서브넷 레벨에서 보안을 강화할 수 있습니다.
* **비용:** VPC 자체를 생성하고 사용하는 데는 **별도의 추가 비용이 발생하지 않습니다.** 다만, VPC 내에서 사용하는 리소스(EC2, NAT Gateway 등)나 데이터 전송(Data Transfer)에 대해서는 과금이 발생합니다.

---

### 2. VPC의 핵심 구성 요소

VPC를 구축하기 위해 반드시 이해해야 할 주요 구성 요소들은 다음과 같습니다.

#### ① IPv4 CIDR 블록 (Classless Inter-Domain Routing)

VPC를 생성할 때 가장 먼저 결정해야 하는 것은 프라이빗 IP 주소의 범위입니다.

* 예: `10.0.0.0/16` (65,536개의 IP 주소 사용 가능)
* 한 번 설정된 주소 범위는 변경할 수 없으므로 신중하게 설계해야 합니다.

#### ② Subnet (서브넷)

VPC의 IP 주소 범위를 더 작은 덩어리로 나눈 네트워크 분할 단위입니다.

* **Public Subnet (퍼블릭 서브넷):** 인터넷 게이트웨이를 통해 인터넷과 직접 통신이 가능한 서브넷입니다. 웹 서버 등이 위치합니다.
* **Private Subnet (프라이빗 서브넷):** 인터넷과 직접 연결되지 않는 폐쇄된 서브넷입니다. 데이터베이스(DB)나 백엔드 서버가 위치합니다.

#### ③ IGW (Internet Gateway, 인터넷 게이트웨이)

VPC 내부의 리소스와 외부 인터넷 간의 통신을 가능하게 하는 게이트웨이입니다. 퍼블릭 서브넷이 인터넷에 연결되려면 반드시 이 IGW가 필요합니다.

#### ④ Route Table (라우팅 테이블)

네트워크 트래픽이 어디로 향해야 하는지 결정하는 규칙 세트입니다. 서브넷은 반드시 하나의 라우팅 테이블과 연결되어야 합니다.

#### ⑤ NAT Gateway (Network Address Translation Gateway, 네트워크 주소 변환 게이트웨이) 💰**유료**

프라이빗 서브넷에 있는 인스턴스가 외부 인터넷으로 나갈 수 있게(예: 보안 패치 업데이트) 도와주는 서비스입니다. 외부에서 내부로 들어오는 연결은 차단합니다.

> **주의:** NAT Gateway는 시간당 이용 요금과 데이터 처리 요금이 발생하는 **유료 서비스**입니다. 실습 후 반드시 삭제가 필요합니다.

---

### 3. VPC 보안 아키텍처

VPC는 이중 보안 계층을 제공하여 안전한 인프라 운영을 지원합니다.

| 구분 | **Security Group (보안 그룹)** | **NACL (네트워크 ACL)** |
| --- | --- | --- |
| **적용 범위** | 인스턴스 레벨 (호스트 보안) | 서브넷 레벨 (네트워크 보안) |
| **상태 유지** | **Stateful** (허용된 요청의 응답은 자동 허용) | **Stateless** (나가는 트래픽도 명시적 허용 필요) |
| **규칙 적용** | 허용(Allow) 규칙만 설정 가능 | 허용(Allow) 및 거부(Deny) 모두 가능 |
| **적용 순서** | 모든 규칙을 평가 후 결정 | 규칙 번호 순서대로 평가 |

---

### 4. VPC 연결 옵션 (Advanced)

* **VPC Peering (VPC 피어링):** 두 개의 VPC 간에 트래픽을 라우팅할 수 있도록 연결하는 방식입니다. 동일 계정 혹은 타 계정 간에도 가능합니다.
* **VPC Endpoint (VPC 엔드포인트):** 인터넷 게이트웨이나 NAT 장치 없이도 AWS 서비스(S3, DynamoDB 등)에 프라이빗하게 연결할 수 있게 해줍니다.
* **VPN / Direct Connect:** 온프레미스(사내 데이터 센터)와 AWS VPC를 연결하는 방식입니다.

---

### 실무 활용 팁 (Best Practices)

1. **IP 주소 설계:** 향후 확장성을 고려하여 너무 작지 않은 CIDR 범위를 설정하십시오. (보통 `/16` 권장)
2. **고가용성 확보:** 하나의 VPC 내에서 여러 **AZ**(Availability Zone, 가용 영역)에 서브넷을 분산 배치하여 장애에 대비하십시오.
3. **최소 권한 원칙:** 보안 그룹 설정 시 필요한 포트만 최소한으로 개방하십시오.

---

**Next Step: Subnet 설계 및 Routing 설정**

AWS VPC의 개념과 구성 요소를 확인했습니다.
NAT Gateway 생성 시 발생하는 비용에 유의하시기 바랍니다.

교재의 다음 단계인 실제 서브넷 설계와 라우팅 구성에 대해 더 궁금한 점이 있으신가요?
