## EC2 및 EBS 아키텍처 설계: 서비스별 전문가 선택 기준

클라우드 인프라 설계 시 가장 흔히 발생하는 실수는 '무조건 고사양'을 선택하거나, 서비스 특성을 고려하지 않은 '기본 설정'을 유지하는 것입니다. 본 가이드는 실무 현장의 사례를 바탕으로 최적의 인스턴스와 스토리지 조합을 제시합니다.

---

### 1. 서비스 특성별 EC2 인스턴스 패밀리 선택

**EC2(Elastic Compute Cloud, 가상 서버)** 인스턴스는 워크로드의 성격에 따라 다양한 패밀리로 구분됩니다. 잘못된 선택은 불필요한 비용(Over-provisioning)이나 성능 저하를 초래합니다.

#### A. 프론트엔드 웹 서버 (Frontend Web Server)

사용자의 요청을 받아 정적 콘텐츠를 전달하거나 간단한 렌더링을 수행하는 환경입니다.

* **전문가 선택:** **T3** 또는 **T4g** 시리즈
* **이유:** 프론트엔드는 사용자 유입에 따라 트래픽 변동이 심합니다. **Burstable Performance(버스트 가능 성능, 필요 시 성능을 일시적으로 높이는 기능)**를 제공하는 T 시리즈가 가장 경제적입니다.
* **실무 팁:** AWS에서 자체 개발한 ARM 기반 프로세서인 **Graviton(그라비톤)** 기반의 **T4g** 인스턴스를 선택하면 인텔 기반보다 약 20% 저렴한 비용으로 더 높은 성능을 얻을 수 있습니다.

#### B. 백엔드 애플리케이션 서버 (Backend Application Server)

비즈니스 로직을 처리하고 데이터베이스와 통신하며 연산을 수행하는 핵심 서버입니다.

* **전문가 선택:** **M5** 또는 **M6i** (**General Purpose, 범용 - CPU와 메모리 비율이 균형 잡힌 유형**), 혹은 연산량이 많다면 **C5** / **C6i** (**Compute Optimized, 컴퓨팅 최적화 - CPU 성능에 집중한 유형**)
* **이유:** 범용인 M 시리즈는 안정적인 성능 유지가 가능합니다. 만약 이미지 처리나 복잡한 알고리즘 연산이 위주라면 컴퓨팅 최적화인 C 시리즈가 유리합니다.

#### C. 비중요 작업용 DB 서버 (Non-critical Database)

테스트 환경이나 내부 관리용으로 사용하는 데이터베이스 서버입니다.

* **전문가 선택:** **R5** 또는 **R6g**
* **이유:** 데이터베이스는 **Memory Optimized(메모리 최적화, 대용량 RAM을 제공하는 유형)**인 R 시리즈가 필수입니다. DB 성능은 CPU보다 **Cache Hit Rate(캐시 적중률, 메모리에서 데이터를 찾는 비율)**에 더 큰 영향을 받기 때문입니다. 비중요 작업이라도 메모리가 부족하면 시스템이 멈추므로 사양을 낮추더라도 R 시리즈를 권장합니다.

#### D. 임시 파일 서버 및 로그 수집기 (Temporary File Server)

로그 파일을 임시로 저장하거나 대용량 데이터를 가공하기 위해 잠시 머무르는 공간입니다.

* **전문가 선택:** **T3** (소규모) 또는 **C5** (대용량 가공 시)
* **이유:** 데이터 전송이 주 목적이므로 고가의 인스턴스보다는 저렴한 인스턴스와 대용량의 저가형 EBS 조합이 효율적입니다.

---

### 2. EBS(Elastic Block Store) 설계 및 고려사항

EC2가 컴퓨터의 CPU/RAM이라면, **EBS(Elastic Block Store, 클라우드 블록 스토리지)**는 하드디스크입니다. 데이터의 중요도와 입출력 빈도에 따라 선택이 달라집니다.

#### [EBS 볼륨 유형별 특징 비교]

| 볼륨 유형 | 명칭 및 설명 | 주요 용도 |
| --- | --- | --- |
| **gp3** | **General Purpose SSD (범용 SSD)** | 대부분의 워크로드, 가성비 최고 |
| **io2** | **Provisioned IOPS SSD (프로비저닝된 IOPS SSD)** | 고성능 DB, 지연 시간에 민감한 서비스 |
| **st1** | **Throughput Optimized HDD (처리량 최적화 HDD)** | 빅데이터, 로그 파일, 대용량 스트리밍 |

#### 실무 적용 시 고려사항

* **gp3 사용의 생활화:** 과거에는 gp2를 많이 썼으나, 현재는 gp3가 더 저렴하고 성능 조절이 자유롭습니다. **IOPS**를 용량과 상관없이 최소 3,000까지 무료로 제공하므로 무조건 gp3를 선택하세요.
* **임시 파일 서버의 경제성:** 1TB 이상의 대용량 임시 파일을 다룬다면 SSD 대신 **st1(HDD)**을 고려하세요. 비용을 절반 이하로 줄일 수 있습니다. (단, 부팅 볼륨으로는 사용할 수 없습니다.)
* **처리량(Throughput) 대역폭:** 백엔드 서버에서 대용량 파일을 업로드/다운로드한다면 **IOPS**뿐만 아니라 **MiB/s(Megabytes per second, 초당 전송량)** 수치를 확인해야 병목 현상을 방지할 수 있습니다.

---

### 3. 실무 현장 사례 (Case Study)

> **[사례 1: 갑작스러운 이벤트 트래픽이 예상되는 쇼핑몰 프론트엔드]**
> * **기존:** M5.large (고정 비용 발생)
> * **변경:** T4g.medium + **Auto Scaling(오토 스케일링, 부하에 따라 인스턴스 수를 자동 조절하는 기능)**
> * **결과:** 평상시 비용 40% 절감, 트래픽 폭주 시에만 인스턴스를 늘려 안정성 확보.
> 
> 

> **[사례 2: 개발팀 전용 테스트용 MySQL DB]**
> * **기존:** T3.medium (메모리 부족으로 잦은 다운 발생)
> * **변경:** R6g.medium + gp3 볼륨
> * **결과:** 인스턴스 비용은 약간 상승했으나 메모리 안정성 확보로 개발 생산성 증대. EBS의 IOPS를 4,000으로 수동 설정하여 쿼리 속도 개선.
> 
> 

---

### ⚠️ 과금 주의사항 (Billing & Cost)

1. **EC2 인스턴스:** **Free Tier(프리 티어, 무료 제공 범위)**인 t2.micro 또는 t3.micro 범위를 벗어나면 시간당 요금이 청구됩니다. 사용하지 않을 때는 반드시 **Stop(중지)**이 아닌 **Terminate(종료)**를 해야 인스턴스 요금이 나가지 않습니다. **(유료 서비스 주의)**
2. **EBS 비용:** 인스턴스를 중지(Stop)하더라도 EBS 저장 공간에 대한 비용은 계속 부과됩니다. 완전히 삭제하려면 인스턴스 종료(Terminate) 시 'Delete on Termination' 옵션이 체크되어 있는지 확인하세요. **(유료 서비스 주의)**
3. **데이터 전송료:** AWS 외부로 나가는 데이터(Outbound Traffic)는 유료입니다. 대용량 파일 서버 운영 시 전송료 폭탄을 주의해야 합니다. **(유료 서비스 주의)**

---

### 실무자 핵심 요약

1. 웹 서버는 T4g, 백엔드는 M6i, DB는 R6g를 우선 고려한다.
2. EBS는 고민하지 말고 **gp3**로 시작한다.
3. 비용 절감을 위해 **Graviton(ARM 기반)** 인스턴스를 적극 활용한다.
4. 임시 대용량 저장소는 **st1(HDD)**으로 비용을 아낀다.

---

**주석**

* **IOPS (Input/Output Operations Per Second):** 디스크가 1초에 수행할 수 있는 읽기/쓰기 작업의 횟수입니다. 이 수치가 높을수록 DB 반응 속도가 빠릅니다.
* **Throughput (처리량):** 한 번에 얼마나 많은 데이터를 보낼 수 있는지를 나타내는 대역폭입니다. 파일 전송 속도에 직접적인 영향을 줍니다.
* **Instance Family (인스턴스 패밀리):** CPU, 메모리, 저장소, 네트워크 성능의 조합에 따라 분류된 인스턴스 그룹입니다.

Next Step: EC2 가동 및 중지 실습
