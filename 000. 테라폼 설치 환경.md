# Chapter 2. 테라폼 설치 환경 구성 및 전략

본 챕터에서는 인프라 구성을 위한 테라폼(Terraform)의 최적 설치 위치를 선정하고, 실습 환경에 따른 하드웨어 리소스 분석과 운영체제별 설치 방법을 다룹니다. 특히 윈도우 환경에서의 패키지 매니저 활용법을 중점적으로 설명합니다.

---

## 2.1 테라폼의 설치 위치 선정

테라폼을 어디에 설치하느냐는 전체 실습의 효율성을 결정짓는 중요한 요소입니다. 결론부터 말하자면, 테라폼은 **Host PC(여러분의 컴퓨터)**에 설치하는 것이 정석입니다.

### 1. Host PC 설치 권장 이유

테라폼은 인프라를 생성하고 관리하는 '제어 도구(Control Plane)'입니다. 따라서 가장 상위 레벨에서 하위 리소스(VM, Cloud)를 내려다보며 제어해야 합니다.

* **아키텍처 계층 구조 (Architectural Hierarchy):**
* **Host PC (Terraform 위치):** '신(God)'의 위치에서 인프라를 창조합니다. VirtualBox나 AWS와 직접 통신합니다.
* **Guest VM (생성 대상):** 테라폼이 만들어내는 결과물입니다. 이곳에 테라폼을 설치하면 '창조물'이 '창조주'를 제어하려는 모순이 발생하여 네트워크 설정이 매우 복잡해집니다.


* **닭과 달걀의 문제 해결:**
* VM 내부에 테라폼을 설치하려면, 그 VM은 누가 만들어주나요? 결국 첫 번째 VM을 생성하기 위해서라도 테라폼은 Host PC에 있어야 합니다.


* **리소스 효율성:**
* 테라폼은 데몬(Daemon)이 아니며 단순한 실행 파일(Binary)입니다. 메모리를 거의 점유하지 않으므로 굳이 별도의 관리용 VM을 띄워 리소스를 낭비할 필요가 없습니다.



| 구분 | Host PC (Windows/Mac) | Guest VM (Ubuntu) |
| --- | --- | --- |
| **설치 목적** | **인프라 생성 (Provisioning)** | 내부 앱 배포 (CD Pipeline) |
| **VirtualBox 제어** | **가능 (Direct API 호출)** | 불가능/매우 어려움 |
| **파일 편집** | **편함 (VS Code 로컬 사용)** | 불편함 (SSH/SCP 필요) |

> **강사의 팁:** 테라폼은 밖(PC)에서 안(VM)을 **'만드는'** 도구이고, 앤서블(Ansible)은 안(VM)에서 내부를 **'꾸미는'** 도구입니다. 따라서 테라폼은 PC에, 앤서블은 VM(Control Node)에 설치하는 것이 최적의 구성입니다.

---

## 2.2 실습 환경 하드웨어 부하 분석

테라폼으로 Kubernetes(K8s) 클러스터(Master 1대 + Worker 2대)를 구축할 때, PC가 감당할 수 있는지에 대한 분석입니다.

### 1. 리소스 소모 주체 확인

* **Terraform:** `terraform apply` 명령 실행 시에만 CPU를 잠깐 사용하는 **'깃털'** 같은 존재입니다. PC 성능에 영향을 주지 않습니다.
* **VirtualBox (VMs):** VM 3대를 켜는 순간 할당된 RAM을 즉시 점유하는 **'쇠공'** 같은 존재입니다. PC 성능 저하의 주원인입니다.

### 2. RAM 용량별 실습 시나리오

실습 성공의 열쇠는 CPU보다 **RAM 용량**에 달려 있습니다.

* **RAM 8GB (최소 사양 - 힘듦):**
* 웹 브라우저와 VM 3대를 동시에 띄우기 버겁습니다.
* **해결책:** 표준 Kubernetes 대신 가벼운 **K3s**를 사용하고, VM을 **Headless 모드(GUI 없음)**로 구동해야 합니다.


* **RAM 16GB (권장 사양 - 쾌적):**
* Master(4GB), Worker(2GB x 2)를 할당하고도 Host OS에 여유가 있습니다.
* 표준 **Kubeadm** 설치 실습이 가능하며, IDE와 브라우저를 동시에 사용해도 무방합니다.


* **RAM 32GB 이상 (강사급 사양):**
* VM 5~6대 및 모니터링 도구(Prometheus/Grafana)까지 풀 세트로 실습 가능합니다.



---

## 2.3 윈도우 환경에서의 설치 전략: Chocolatey

윈도우 사용자에게는 수동 설치보다 패키지 매니저인 **Chocolatey** 사용을 강력하게 권장합니다.

### 1. 수동 설치 vs Chocolatey 비교

| 비교 항목 | 수동 설치 (Manual) | Chocolatey (권장) |
| --- | --- | --- |
| **설치 과정** | 다운로드 → 압축 해제 → 폴더 이동 → 환경 변수 편집 | 터미널 명령어 한 줄 입력 |
| **환경 변수(PATH)** | **사용자가 직접 설정 (오류 다발 구간)** | **자동 설정됨 (핵심 장점)** |
| **유지 보수** | 버전 업그레이드 시 위 과정 반복 | `choco upgrade terraform` |
| **강의 효율** | 수강생별 경로 상이로 디버깅 난해 | 모든 수강생 환경 통일 |

### 2. Chocolatey 설치 및 테라폼 설치 가이드

실무 DevOps 엔지니어들은 윈도우에서 `choco`, 맥에서 `brew`를 사용하는 것이 표준입니다.

1. **PowerShell 관리자 권한 실행:**
* 시작 메뉴 > PowerShell 검색 > 우클릭 > **[관리자 권한으로 실행]**


2. **Chocolatey 설치 (이미 설치된 경우 생략):**
* 공식 홈페이지의 설치 스크립트 복사 및 붙여넣기


3. **테라폼 설치 명령어:**
```powershell
choco install terraform -y

```


4. **설치 확인:**
* 터미널 재실행 후 다음 명령어 입력


```powershell
terraform --version

```



> **주의사항:** Chocolatey 설치 시 반드시 **관리자 권한** 터미널을 사용해야 하며, 설치 직후에는 터미널을 껐다가 다시 켜야 환경 변수(Path)가 적용됩니다.

Next Step: Chocolatey로 설치된 테라폼을 활용하여 VS Code 개발 환경을 구성하고, 필수 확장 프로그램(HashiCorp Terraform)을 설치 및 설정하는 방법
